<div class="container mt-3">
  <div class="row justify-content-center">
    <div class="col-xs-12 col-sm-8 col-lg-6">
      <h2 class="text-center mb-3">Booking <%= @booking.id %></h2>
      <p>On <%= @booking.start_time.strftime("%a, %e %b %Y") %>,
        at <%= @booking.start_time.strftime("%H:%M") %>.
        Doctor: <%= @doctor.first_name %>,
        Patient: <%= @patient.first_name %>
        (<%= @booking.status %>)
      </p>
      <div class="list-group">
        <% @booking.booking_services.each do |booking_service| %>
          <%= link_to booking_service.service.name, service_path(booking_service.service), class: "list-group-item list-group-item-action" %>
          <%# if @count > 1 %>
            <%#= link_to "Delete", booking_path(booking_service.booking.id, booking: { booking_services_attributes: { id: booking_service.id, _destroy: true }}), remote: true, method: :patch, data: { confirm: "Are you sure?" } %>
          <%# end %>
        <% end %>
      </div>
      <%#= link_to "Delete", booking_path(@booking.id, booking: { booking_services_attributes: { id: @booking.booking_services.last.id, _destroy: true }}), remote: true, method: :patch, data: { confirm: "Are you sure?" } %>
      <%# service_id = 2 %>
      <%#= link_to "Add", booking_path(@booking.id, booking: { booking_services_attributes: { "0" => { service_id: "#{service_id}" }}}), remote: true, method: :patch %>
      <br>
      <%= link_to "List", bookings_path %>
      <% if policy(@booking).edit? %>
        <%= link_to edit_booking_path(@booking) do %>
          <i class="far fa-edit"></i>
        <% end %>
      <% end %>
      <% if policy(@booking).destroy? %>
        <%= link_to booking_path(@booking), method: :delete, data: { confirm: "Are you sure?" } do %>
          <i class="far fa-trash-alt"></i>
        <% end %>
      <% end %>
    </div>
  </div>
</div>
